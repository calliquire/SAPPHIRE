---
title: "data_modeling_1"
author: "calliquire"
date: "2024-10-03"
output: workflowr::wflow_html
editor_options:
  chunk_output_type: console
---

**About This Analysis:** This analysis markdown page is for fitting the initial multivariate model to the cleaned_screening_data.csv. Baby's first data visualization.

## Set Up

1. Load the cleaned data.
```{r}
data <- read.csv("data/cleaned_screening_long.csv")
```

2. Load relevant libraries.
```{r, message=FALSE, warning=FALSE}
library(lme4)
library(car)
library(ggplot2)
```

3. Fit the Multivariate Mixed-Effects Model.
Hereâ€™s a general structure for the multivariate model:
-   Dependent Variable: Reflectance Value
-   Fixed Effects: Reflectance Metric, Body Site, Collection Period
-   Random Effects: Individual participants (to account for variability across individuals)
```{r}
model <- lmer(reflectance_value ~ body_site * reflectance_metric * collection_period + (1|participant_centre_id), data = data)
```

4. Visualize the results.
```{r}
ggplot(data, aes(x = body_site, y = reflectance_value, color = reflectance_metric)) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  facet_wrap(~ collection_period) +
  labs(title = "Reflectance Values by Body Site and Reflectance Metric",
       x = "Body Site",
       y = "Reflectance Value",
       color = "Reflectance Metric") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))  # Rotate x-axis labels for readability
```

5. Save the plot.
```{r}
# Save the last plot you made
ggsave("data/reflectance_plot.png", width = 8, height = 6)

# Or save it as a PDF
ggsave("data/reflectance_plot.pdf", width = 8, height = 6)
```

